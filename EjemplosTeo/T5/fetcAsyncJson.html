<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Asinc Fetch</title>
   <script type="text/javascript">
      async function cargaFech(src_url, lugar) {
         try {
            let response = await fetch(src_url)
            if (response.status !== 200) {
               console.log('We have a problem. Status Code: ' +
                  response.status);
               throw new Error(response.status)
            }
            data = await response.json();
            p = document.createElement("p");
            p.innerHTML = data;
            lugar.appendChild(p);
            return true
         }
         catch (err) {
            console.log('Fetch Error :' + err);
            return false;
         };

      }
      async function cargaFechImage(src_url, lugar) {
         try {
            let response = await fetch(src_url)
            if (response.status !== 200) {
               console.log('We have a problem. Status Code: ' +
                  response.status);
               throw new Error(response.status)
            }
            data = await response.blob();
            var objectURL = URL.createObjectURL(data);
            lugar.src = objectURL;
            return (true)
         }
         catch (err) {
            console.log('Fetch Error :-S', err);
            return (false)
         };

      }


      function detectores() {
         lugar = document.querySelector("#divi");
         enlace = document.querySelector("#txt");
         enlace.addEventListener("click", function (event) {
            event.preventDefault()
            if (cargaFech(event.target.href, lugar) == true) {
               console.log("CorrectoT!!")
            }
         });
         document.querySelector("#img").addEventListener("click", function (event) {
            event.preventDefault()
            if (cargaFechImage(event.target.href, lugar.querySelector("img")) == true) {
               console.log("CorrectoI!!!")
            }
         });
      }
      document.addEventListener("DOMContentLoaded", function () {
         detectores()
      });
   </script>
</head>

<body>
   <h1>Hola Mundo<h1>
      <nav>
         <p><a id="txt" href="https://www.el-tiempo.net/api/json/v2/provincias/12/municipios/12050"> Texto </a>
         <p>
         <p><a id="img" href="./../media/image8.png"> Imagen</a>
         <p>
      </nav>
      <div id="divi">
         <img alt="AparecerÃ¡ la Imagen"></img>
      </div>
</body>

</html>